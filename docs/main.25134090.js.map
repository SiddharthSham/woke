{"version":3,"sources":["js/core/mathUtils.js","js/core/cursor.js","js/core/scroller.js","js/core/skew.js","js/core/main.js"],"names":["lerp","a","b","n","map","val","c","d","Cursor","shouldAnimate","mouseDown","init","crsr","document","getElementById","cursorPos","x","y","r","cursorTarget","style","listeners","update","window","addEventListener","move","clientX","clientY","display","setTimeout","opacity","passive","event","Math","round","animComplete","transform","bounds","vw","innerWidth","vh","innerHeight","Scroller","scrollContent","scrollWrapper","body","curScroll","targetScroll","dragger","resize","documentElement","scrollTop","dim","scrollWidth","height","initPos","isDragging","slider","e","preventDefault","max","Skew","skew","cards","querySelectorAll","s","forEach","card","onload","cursor","titles","lastFrameTime","requestAnimationFrame","render","elapsedTime","delta","isTicking","title","scrollHeight"],"mappings":"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","file":"main.25134090.js","sourceRoot":"..","sourcesContent":["/* Linear interpolation */\r\nexport const lerp = (a, b, n) => (1 - n) * a + n * b\r\n\r\n/* Map values from one range (a-b) to another (c-d) */\r\nexport const map = (val, a, b, c, d) => (val - a) * (d - c) / (b - a) + c","import {\r\n    lerp\r\n} from './mathUtils'\r\n\r\n// TODO: Add anchor link hover listener\r\n\r\nexport class Cursor {\r\n\r\n    constructor() {\r\n        this.shouldAnimate = false\r\n        this.mouseDown = false\r\n        this.init = false\r\n        this.crsr = document.getElementById('crsr')\r\n        this.cursorPos = {\r\n            x: 0,\r\n            y: 0,\r\n            r: 0.5\r\n        }\r\n        this.cursorTarget = {\r\n            x: 0,\r\n            y: 0,\r\n            r: 0.5\r\n        }\r\n        this.style()\r\n        this.listeners()\r\n        this.update()\r\n    }\r\n\r\n    style() {\r\n        this.crsr.style = `height: 64px;\r\n                        width: 64px;\r\n                        z-index: 9999;\r\n                        background: white;\r\n                        position: fixed;\r\n                        border-radius: 50%;\r\n                        opacity: 0;\r\n                        transition: opacity 0.6s ease-in-out;\r\n                        will-change: transform;\r\n                        display: none;\r\n                        pointer-events: none;`\r\n    }\r\n\r\n    listeners() {\r\n        window.addEventListener('mousemove', move => {\r\n            // subtract cursor width / 2\r\n            this.cursorPos.x = move.clientX - 32\r\n            this.cursorPos.y = move.clientY - 32\r\n            this.shouldAnimate = true\r\n            if (!this.init) {\r\n                this.cursorTarget.x = move.clientX - 32\r\n                this.cursorTarget.y = move.clientY - 32\r\n                this.crsr.style.display = 'block'\r\n                setTimeout(() => {\r\n                    this.crsr.style.opacity = 1\r\n                }, 100)\r\n                this.init = true\r\n            }\r\n        }, {\r\n            passive: true\r\n        })\r\n        window.addEventListener('mousedown', event => {\r\n            this.shouldAnimate = true\r\n            this.cursorPos.r = 1\r\n            this.mouseDown = true\r\n        })\r\n        window.addEventListener('mouseup', event => {\r\n            this.shouldAnimate = true\r\n            this.cursorPos.r = 0.5\r\n            setTimeout(() => {\r\n                this.mouseDown = false\r\n            }, 1000)\r\n        })\r\n    }\r\n\r\n    animComplete() {\r\n        return Math.round(this.cursorTarget.x) == this.cursorPos.x &&\r\n               Math.round(this.cursorTarget.y) == this.cursorPos.y &&\r\n               !this.mouseDown\r\n    }\r\n\r\n    get isTicking() {\r\n        return this.shouldAnimate || !this.animComplete()\r\n    }\r\n\r\n    update() {\r\n        if (!this.shouldAnimate && this.animComplete()) return\r\n\r\n        this.cursorTarget.x = lerp(this.cursorTarget.x, this.cursorPos.x, 0.1)\r\n        this.cursorTarget.y = lerp(this.cursorTarget.y, this.cursorPos.y, 0.1)\r\n        this.cursorTarget.r = lerp(this.cursorTarget.r, this.cursorPos.r, 0.1)\r\n        this.crsr.style.transform = `matrix(${this.cursorTarget.r}, 0, 0, ${this.cursorTarget.r}, ${this.cursorTarget.x}, ${this.cursorTarget.y})`\r\n\r\n        this.shouldAnimate = false\r\n    }\r\n\r\n}","import {\r\n    lerp\r\n} from './mathUtils';\r\n\r\nconst bounds = () => {\r\n    return {\r\n        vw: window.innerWidth,\r\n        vh: window.innerHeight\r\n    }\r\n}\r\n\r\nexport class Scroller {\r\n    constructor() {\r\n        // select elements\r\n        this.scrollContent = document.getElementById('scroll-content')\r\n        this.scrollWrapper = document.getElementById('scroll-wrapper')\r\n        this.body = document.body\r\n\r\n        // init values\r\n        this.curScroll = 0, this.targetScroll = 0\r\n\r\n        // setup events\r\n        this.listeners()\r\n        this.style()\r\n        this.dragger()\r\n        this.resize()\r\n    }\r\n\r\n    // style elements\r\n    style() {\r\n        this.scrollContent.style = `height: 100%;\r\n                                    padding: 0 12.5vw 0 25vw;\r\n                                    min-width: 200vw;\r\n                                    will-change: transform;`\r\n        this.scrollWrapper.style = `position: fixed;`\r\n    }\r\n\r\n    // add event listener\r\n    listeners() {\r\n        window.addEventListener('scroll', event => {\r\n            this.curScroll = document.documentElement.scrollTop\r\n            this.shouldAnimate = true\r\n        }, {\r\n            passive: true\r\n        })\r\n        window.addEventListener('resize', () => {\r\n            this.resize()\r\n        }, {\r\n            passive: true\r\n        })\r\n    }\r\n\r\n    // handle resize\r\n    resize() {\r\n        this.dim = bounds()\r\n        this.scrollWidth = this.scrollContent.scrollWidth\r\n        this.body.style.height = `${this.scrollWidth - (this.dim.vw - this.dim.vh)}px`;\r\n    }\r\n\r\n    // extend with dragging\r\n    // NOTE: This logic is incomplete/buggy\r\n    dragger () {\r\n        let initPos;\r\n        let isDragging = false\r\n        const slider = document.getElementById('slider')\r\n\r\n        slider.addEventListener('mousedown', e => {\r\n            initPos = e.clientX\r\n            isDragging = true\r\n        })\r\n        slider.addEventListener('mousemove', e => {\r\n            e.preventDefault()\r\n            if (!isDragging) return\r\n            document.documentElement.scrollTop += (3 * (initPos - e.clientX))\r\n        })\r\n        slider.addEventListener('mouseup', e => {\r\n            isDragging = false\r\n        })\r\n    }\r\n\r\n    // check if the current animations is complete\r\n    animComplete() {\r\n        return Math.round(this.curScroll) == Math.round(this.targetScroll)\r\n    }\r\n\r\n    // check if animation is ticking\r\n    get isTicking() {\r\n        return this.shouldAnimate || !this.animComplete()\r\n    }\r\n\r\n    // progress animation by one step\r\n    // meant to be used with an external rAF loop\r\n    update() {\r\n        if (!this.shouldAnimate && this.animComplete()) return\r\n\r\n        this.targetScroll = Math.max(lerp(this.targetScroll, this.curScroll, 0.1), 0.0001)\r\n        this.scrollContent.style.transform = `translateX(${-1*this.targetScroll}px)`;\r\n\r\n        this.shouldAnimate = false\r\n    }\r\n}","import {\r\n    map\r\n} from './mathUtils'\r\n\r\nexport class Skew {\r\n    constructor() {\r\n        this.skew = 0\r\n        this.cards = document.querySelectorAll('.card')\r\n    }\r\n\r\n    update(s) {\r\n        this.skew = map(s.curScroll - s.targetScroll, 0, s.scrollWidth, 0, 30)\r\n        this.cards.forEach(card => {\r\n            card.style.transform = `skewX(${this.skew}deg)`\r\n        })\r\n    }\r\n}","import {\r\n    map\r\n} from './mathUtils';\r\nimport {\r\n    Cursor\r\n} from './cursor'\r\nimport {\r\n    Scroller\r\n} from './scroller';\r\nimport {\r\n    Skew\r\n} from './skew';\r\n\r\nwindow.onload = () => {\r\n    init()\r\n}\r\n\r\n// init events\r\nconst init = () => {\r\n\r\n    // instantiate effects\r\n    const cursor = new Cursor()\r\n    const s = new Scroller()\r\n    const skew = new Skew()\r\n    const titles = document.querySelectorAll('.titles')\r\n\r\n    // core rAF ticker thread\r\n    let lastFrameTime = 0;\r\n    const render = elapsedTime => {\r\n\r\n        // framerate control\r\n        let delta = elapsedTime - (lastFrameTime || 0);\r\n        window.requestAnimationFrame(render)\r\n        if (lastFrameTime && (delta < 16)) return\r\n        lastFrameTime = elapsedTime;\r\n\r\n        // perform updates\r\n        s.update()\r\n        cursor.update()\r\n        skew.update(s)\r\n\r\n        // extra effect synced with scroller\r\n        if (s.isTicking) {\r\n            titles.forEach(title => {\r\n                title.style.transform = `translateY(-${map(s.targetScroll, 0, s.scrollWidth, 0, title.scrollHeight)}px)`\r\n            })\r\n        }\r\n    }\r\n    window.requestAnimationFrame(render)\r\n}"]}